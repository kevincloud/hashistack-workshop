{
    "ID": "online-store-job",
    "Name": "online-store",
    "Type": "service",
    "Datacenters": ["dc1"],
    "TaskGroups": [{
        "Name": "online-store-group",
        "Tasks": [{
            "Name": "online-store",
            "Driver": "docker",
            "Vault": {
                "Policies": ["access-creds"]
            },
            "Config": {
                "image": "https://753646501470.dkr.ecr.us-east-1.amazonaws.com/online-store:online-store",
                "port_map": [{
                    "http": 80
                }]
            },
            "Templates": [{
                "EmbeddedTmpl": "{{with secret \"secret/data/aws\"}}\nAWS_ACCESS_KEY = \"{{.Data.data.aws_access_key}}\"\nAWS_SECRET_KEY = \"{{.Data.data.aws_secret_key}}\"\n{{end}}\nAWS_REGION = \"us-east-1\"\n                ",
                "DestPath": "secrets/file.env",
                "Envvars": true
            }],
            "Resources": {
                "Networks": [{
                    "ReservedPorts": [
                        {
                            "Label": "http",
                            "Value": 80
                        }
                    ]
                }]
            },
            "Services": [{
                "Name": "online-store",
                "PortLabel": "http"
            }]
        }]
    }]
}
